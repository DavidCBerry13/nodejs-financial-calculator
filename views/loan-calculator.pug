extends layout

block content
  h1= title

  form(method='post' action='loan-calculator' class='needs-validation' novalidate)

    // Principal
    div(class='row mb-3 justify-content-md-center')
      label(for='inputPrincipal' class='col-form-label col-sm-2') Principal (loan amount)
      div(class='col-sm-2')
        div(class='input-group has-validation')
          span(class='input-group-text' id='principalPrepend') $
          input(id='inputPrincipal' name='principal' class='form-control' placeholder="10000" value=formData.principal required pattern='^\\d{1,8}$') 
          div(class='invalid-feedback') Principal is required and must be between $1 and $10,000,000.
            

    // Interest rate
    div(class='row mb-3 justify-content-md-center')
      label(for='inputInterestRate' class='col-form-label col-sm-2') Interest Rate
      div(class='col-sm-2')
        div(class='input-group has-validation')
          input(id='inputInterestRate' name='interestRate' class='form-control' placeholder="7.5" value=formData.interestRate required pattern='[0-9]{1,2}\\.?\\d{0,3}')
          span(class='input-group-text' id='interestRateAppend') %
          div(class='invalid-feedback') Interest rate is required and must be a value between 0.1 and 29.99.
            

    // Years
    div(class='row mb-3 justify-content-md-center')
      label(for='inputYears' class='col-form-label col-sm-2') Years
      div(class='col-sm-2')
        input(id='inputYears' name='years' class='form-control' placeholder="5" value=formData.years required pattern='^([1-4]{1}[0-9]?)|(5)|(50)$')
        div(class='invalid-feedback') Years are required and must be a value between 1 and 50.
            


    div(class='row mb-3 justify-content-md-center')
      div(class='col-sm-4 text-center')
        input(type='submit' class='btn btn-primary m-3' value='Caclulate')
        input(type='reset' class='btn btn-secondary m-3')

  hr


  if results 
    h2 Results

    h3 Loan Summary
    div(class='row mb-3 justify-content-md-center')
      table(class='table table-hover table-sm')
        thead 
          tr 
            th(class='text-center fs-5') Principal (loan amount)
            th(class='text-center fs-5') Interest Rate
            th(class='text-center fs-5') Years
            th(class='text-center fs-5') Monthly Payment
            th(class='text-center fs-5') Total Interest Paid
            th(class='text-center fs-5') Total Amount Paid
        tbody 
          tr 
            td(class='text-center fs-5')= results.summary.principal
            td(class='text-center fs-5')= results.summary.interestRate
            td(class='text-center fs-5')= results.summary.years
            td(class='text-center fs-5')= results.summary.monthlyPayment
            td(class='text-center fs-5')= results.summary.totalInterest
            td(class='text-center fs-5')= results.summary.totalPayments
